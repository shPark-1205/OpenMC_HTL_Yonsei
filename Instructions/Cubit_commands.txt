reset

# Imports the geometry from your STEP file.
# Note: Modify the path to match your file location.
import step "C:\Users\Administrator\Desktop\YOURFILENAME.stp"

# Finds bodies that share surfaces (faces) with each other.
imprint all

# Executes the Share Topology operation to ensure surfaces are shared between volumes (crucial for DAGMC).
merge all

# Scales the geometry from [mm] (the typical default from CATIA/STEP) to [cm] (the default unit for OpenMC).
# Scaling is centered at the origin.
volume all scale 0.1 about 0 0 0


# The Volume IDs below (1-8) must be verified directly in the Model Tree in Cubit after the scaling operation.
volume 1 name "cell_Outer_He"
volume 2 name "cell_First_Wall"
volume 3 name "cell_First_Wall_Channel"
volume 4 name "cell_Pressure_Tube"
volume 5 name "cell_Pin"
volume 6 name "cell_Breeder"
volume 7 name "cell_Inner_He"
volume 8 name "cell_Outer_Multiplier"

# Creates a material with a specific name. The material name must exactly match the name defined in OpenMC.
create material "eurofer_pressure_tube" property_group "CUBIT-ABAQUS"
create material "eurofer_pin" property_group "CUBIT-ABAQUS"
create material "eurofer_first_wall_channel" property_group "CUBIT-ABAQUS"
create material "He_inner" property_group "CUBIT-ABAQUS"
create material "He_outer" property_group "CUBIT-ABAQUS"
create material "He_channel" property_group "CUBIT-ABAQUS"
create material "tungsten" property_group "CUBIT-ABAQUS"
create material "breeder_pebble_mix" property_group "CUBIT-ABAQUS"
create material "Be12Ti_outer" property_group "CUBIT-ABAQUS"

# Creates Blocks and assigns volume to each.
block 1 add volume 1
block 2 add volume 2
block 3 add volume 3
block 4 add volume 4
block 5 add volume 5
block 6 add volume 6
block 7 add volume 7
block 8 add volume 8

# Assigns materials to the Blocks.
block 1 material "He_outer"
block 2 material "tungsten"
block 3 material "eurofer_first_wall_channel"
block 4 material "eurofer_pressure_tube"
block 5 material "eurofer_pin"
block 6 material "breeder_pebble_mix"
block 7 material "He_inner"
block 8 material "Be12Ti_outer"


# Group Creation is typically used for shared materials but is skipped here since you defined one block per volume.
# GUI (Mode: Mesh, Entity: Surface, Action: Mesh) as it is often easier than command-line meshing.