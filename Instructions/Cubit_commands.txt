reset

# 아래 경로는 본인 stp 파일에 맞게 수정
import step "C:\Users\Administrator\Desktop\YOURFILENAME.stp"

# 서로 면을 공유하는 바디를 찾기
imprint all

# Share topology 실행
merge all

# CATIA에서 stp 파일로 내보내면 기본 단위가 [mm].
# Cubit은 단위 정보를 저장하지 않기 때문에 OpenMC 기본 단위인 [cm]로 바꿔야 함.
volume all scale 0.1 about 0 0 0


# 아래 볼륨 번호는 scale까지 실행한 후 Model Tree에서 직접 확인 필요
volume 1 name "cell_Outer_He"
volume 2 name "cell_First_Wall"
volume 3 name "cell_First_Wall_Channel"
volume 4 name "cell_Pressure_Tube"
volume 5 name "cell_Pin"
volume 6 name "cell_Breeder"
volume 7 name "cell_Inner_He"
volume 8 name "cell_Outer_Multiplier"

# 재료 생성 (OpenMC에서 정의한 이름과 똑같아야 함.)
create material "eurofer_pressure_tube" property_group "CUBIT-ABAQUS"
create material "eurofer_pin" property_group "CUBIT-ABAQUS"
create material "eurofer_first_wall_channel" property_group "CUBIT-ABAQUS"
create material "He_inner" property_group "CUBIT-ABAQUS"
create material "He_outer" property_group "CUBIT-ABAQUS"
create material "tungsten" property_group "CUBIT-ABAQUS"
create material "breeder_pebble_mix" property_group "CUBIT-ABAQUS"
create material "Be12Ti_outer" property_group "CUBIT-ABAQUS"

# 블록 생성
block 1 add volume 1
block 2 add volume 2
block 3 add volume 3
block 4 add volume 4
block 5 add volume 5
block 6 add volume 6
block 7 add volume 7
block 8 add volume 8

# 블록에 재료 할당
block 1 material "He_outer"
block 2 material "tungsten"
block 3 material "eurofer_first_wall_channel"
block 4 material "eurofer_pressure_tube"
block 5 material "eurofer_pin"
block 6 material "breeder_pebble_mix"
block 7 material "He_inner"
block 8 material "Be12Ti_outer"


# 그룹 생성 후 격자 생성
# GUI로 하는 게 편함.